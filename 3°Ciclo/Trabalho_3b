import java.util.Scanner;

class Paciente{
  int senha;
  String nome;
  Paciente proximo;
  Paciente anterior;

  public Paciente(int senha, String nome){
    this.senha = senha;
    this.nome = nome;
    this.proximo = null;
    this.anterior = null;
  }
}

class ControlePacientes{
  Paciente primeiro;
  Paciente ultimo;

    public void adicionarPaciente(int senha, String nome){
        Paciente novoPaciente = new Paciente(senha, nome);
        if(primeiro == null){
            primeiro = novoPaciente;
            ultimo = novoPaciente;
            novoPaciente.proximo = primeiro; // Cria um loop circular
            novoPaciente.anterior = ultimo;
        } else{
            ultimo.proximo = novoPaciente; // Adiciona o novo paciente no final da fila
            novoPaciente.anterior = ultimo; // Atualiza o anterior do novo paciente
            novoPaciente.proximo = primeiro; // Cria um loop circular
            primeiro.anterior = novoPaciente; // Atualiza o anterior do primeiro paciente
            ultimo = novoPaciente; // Atualiza o ultimo paciente
        }  
        System.out.println("Paciente adicionado!");
    }

    public void chamarProximo() {
        if (primeiro == null) {
            System.out.println("Não há pacientes para chamar!");
        } else {
            System.out.println("Chamando " + primeiro.nome + " - Senha: " + primeiro.senha);
            if (primeiro == ultimo) {
                primeiro = null;
                ultimo = null; // finalizando a fila quando não há mais pacientes
            } else {
                primeiro = primeiro.proximo;
                ultimo.proximo = primeiro;
                primeiro.anterior = ultimo;
            }
        }
    }

  public void chamarAnterior(){
       if(primeiro == null){
      System.out.println("Não há pacientes para chamar!");
    } else{
        System.out.println("Chamando " + ultimo.nome + ultimo.senha);
        if(primeiro == ultimo)
            System.out.println("Não há pacientes para chamar!");
        else{
            primeiro.anterior = ultimo;
        }      
    }
  }
}

public class Main{
    public static void main(String[] args) {
        ControlePacientes controle = new ControlePacientes();
        int escolha;
        Scanner scanner = new Scanner(System.in);
        int novasenha = 0;

        do {
            System.out.println("1 - Adicionar paciente");
            System.out.println("2 - Chamar próximo paciente");
            System.out.println("3 - Chamar paciente anterior");
            System.out.println("4 - Sair do programa");
            System.out.println("Escolha uma das opções: ");
            escolha = scanner.nextInt();
            scanner.nextLine();

            switch (escolha) {
                case 1:
                    novasenha++;
                    System.out.println("Digite o nome do paciente:");
                    String nome = scanner.nextLine();
                    System.out.println("A senha de " + nome + " e: " + novasenha);
                    controle.adicionarPaciente(novasenha,nome);
                break;

                case 2:
                    controle.chamarProximo();
                break;

                case 3:
                    controle.chamarAnterior();
                break;

                case 4:
                    System.out.println("Encerrando o programa...");
                break;

                default:
                    System.out.println("Digite um valor valido");
                break;
            }
        } while (escolha != 4);
    }
}
